# Phase 7.5: Arabic/English Typography Spacing - Research

**Researched:** 2026-02-03
**Domain:** React Native Typography / Arabic Text Rendering
**Confidence:** MEDIUM

## Summary

Arabic typography in React Native requires significantly different spacing configurations than English text due to diacritical marks (tashkeel/harakat), taller ascenders/descenders, and platform-specific rendering inconsistencies. Research reveals that the current typography constants (line height ~1.3x) are insufficient for proper Arabic rendering, which requires 1.6-1.8x multipliers to prevent clipping of diacritics.

**Critical finding:** Tajawal font has known rendering issues on iOS where Arabic letters and diacritics are clipped due to incorrect font metrics. The issue has been open since March 2020 with no official fix. Alternative fonts like Cairo, Noto Kufi Arabic, or Noto Naskh Arabic are recommended as they render correctly across platforms.

**Platform differences:** React Native has significant lineHeight behavior differences between iOS and Android. On Android, lineHeight is applied only on top of text, while on iOS it's distributed to both top and bottom. Android also requires `includeFontPadding: false` to prevent extra padding that causes text misalignment.

**Primary recommendation:** Increase line heights to 1.6-1.8x for Arabic text, use letterSpacing: 0 for Arabic (negative spacing breaks character connections), switch to Cairo or Noto Kufi Arabic fonts, and implement platform-specific adjustments for consistent rendering.

## Standard Stack

The established libraries/tools for Arabic typography in React Native:

### Core
| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| expo-font | Latest (SDK 50+) | Font loading and management | Official Expo solution with config plugin support for native font embedding |
| @expo-google-fonts/cairo | Latest | Alternative Arabic font | Clean geometric sans-serif, excellent readability, no clipping issues reported |
| @expo-google-fonts/noto-kufi-arabic | Latest | Alternative Arabic font | W3C/UAE Design System recommended, 9 styles, universal legibility |
| react-native I18nManager | Built-in | RTL/LTR layout control | Native React Native API for bidirectional text direction |

### Supporting
| Library | Version | Purpose | When to Use |
|---------|---------|---------|-------------|
| @expo-google-fonts/noto-naskh-arabic | Latest | Traditional Arabic font | Body text requiring traditional elegance (4 styles) |
| @expo-google-fonts/tajawal | Latest | Modern geometric Arabic font | **NOT RECOMMENDED** - Has iOS clipping issues (GitHub issue #7) |
| react-native-owl | Latest | Visual regression testing | Testing typography changes across devices |
| bidi-js | Latest | Unicode BiDi Algorithm | Fine-grained control of mixed Arabic/English text |

### Alternatives Considered
| Instead of | Could Use | Tradeoff |
|------------|-----------|----------|
| Tajawal | Cairo | Cairo has no known clipping issues; Tajawal has iOS rendering bugs |
| Tajawal | Noto Kufi Arabic | Noto Kufi is W3C recommended; more weights (9 vs 7) |
| Custom font loading | Config plugin (expo-font) | Config plugin loads fonts natively (faster), but requires rebuild; useFonts hook works with Expo Go |

**Installation:**
```bash
# Recommended: Cairo font
npx expo install @expo-google-fonts/cairo expo-font

# Alternative: Noto Kufi Arabic
npx expo install @expo-google-fonts/noto-kufi-arabic expo-font

# For splash screen management
npx expo install expo-splash-screen
```

## Architecture Patterns

### Recommended Project Structure
```
src/
├── constants/
│   ├── theme.ts              # Typography constants with Arabic-optimized values
│   └── fonts.ts              # Font family mappings
├── hooks/
│   └── useCachedFonts.ts     # Font loading with splash screen management
├── components/
│   └── Text/
│       ├── Text.tsx          # Custom Text component with platform adjustments
│       └── Text.test.tsx     # Visual regression tests
└── utils/
    └── typography.ts         # Helper functions for line height calculation
```

### Pattern 1: Platform-Specific Line Height Configuration

**What:** Create separate line height configurations for iOS and Android due to platform rendering differences
**When to use:** Always for production apps with Arabic text support

**Example:**
```typescript
// constants/theme.ts
import { Platform } from 'react-native';

// Line height calculation for Arabic text
// Arabic requires 1.6-1.8x for diacritics vs 1.3-1.5x for English
const calculateLineHeight = (fontSize: number, isArabic: boolean = true): number => {
  const multiplier = isArabic ? 1.75 : 1.4; // 1.75 for Arabic (average of 1.6-1.8)
  const baseHeight = fontSize * multiplier;

  // Platform-specific adjustment
  // Android applies lineHeight only on top, iOS on both top/bottom
  if (Platform.OS === 'android') {
    return Math.round(baseHeight + 2); // Add 2px for Android
  }

  return Math.round(baseHeight);
};

export const Typography = {
  // Font Families - Cairo recommended over Tajawal
  fontFamily: {
    regular: 'Cairo_400Regular',
    medium: 'Cairo_500Medium',
    semibold: 'Cairo_600SemiBold',
    bold: 'Cairo_700Bold',
    extrabold: 'Cairo_800ExtraBold',
    black: 'Cairo_900Black',
  },

  // Sizes
  sizes: {
    xxxl: 32,
    xxl: 28,
    xl: 24,
    lg: 18,
    md: 16,
    sm: 14,
    xs: 12,
  },

  // Line Heights optimized for Arabic (1.6-1.8x multiplier)
  lineHeights: {
    xxxl: calculateLineHeight(32),  // ~56px (1.75x)
    xxl: calculateLineHeight(28),   // ~49px (1.75x)
    xl: calculateLineHeight(24),    // ~42px (1.75x)
    lg: calculateLineHeight(18),    // ~32px (1.75x)
    md: calculateLineHeight(16),    // ~28px (1.75x)
    sm: calculateLineHeight(14),    // ~25px (1.75x)
    xs: calculateLineHeight(12),    // ~21px (1.75x)
  },

  // Letter Spacing - CRITICAL: Use 0 for Arabic text
  letterSpacing: {
    tight: -0.5,    // Only for Latin text
    normal: 0,      // Always use for Arabic
    wide: 2,        // Only for Latin uppercase
    extraWide: 6,   // Only for Latin display text
  },
};
```

### Pattern 2: Custom Text Component with Platform Adjustments

**What:** Wrap React Native Text with platform-specific fixes for consistent rendering
**When to use:** Always; provides centralized control over typography

**Example:**
```typescript
// components/Text/Text.tsx
import React from 'react';
import { Text as RNText, TextProps, Platform, StyleSheet } from 'react-native';
import { Typography } from '@/constants/theme';

interface CustomTextProps extends TextProps {
  variant?: 'xxxl' | 'xxl' | 'xl' | 'lg' | 'md' | 'sm' | 'xs';
  weight?: 'regular' | 'medium' | 'semibold' | 'bold' | 'extrabold' | 'black';
}

export const Text: React.FC<CustomTextProps> = ({
  variant = 'md',
  weight = 'regular',
  style,
  ...props
}) => {
  const fontSize = Typography.sizes[variant];
  const lineHeight = Typography.lineHeights[variant];
  const fontFamily = Typography.fontFamily[weight];

  // Platform-specific fixes
  const platformStyles = Platform.select({
    android: {
      includeFontPadding: false, // Remove extra Android padding
      textAlignVertical: 'center' as const, // Fix vertical alignment
    },
    ios: {},
  });

  return (
    <RNText
      style={[
        styles.base,
        {
          fontSize,
          lineHeight,
          fontFamily,
          letterSpacing: 0, // Always 0 for Arabic
        },
        platformStyles,
        style,
      ]}
      {...props}
    />
  );
};

const styles = StyleSheet.create({
  base: {
    // Base styles
  },
});
```

### Pattern 3: Font Loading with Splash Screen

**What:** Load custom fonts using expo-font config plugin or useFonts hook with proper loading state management
**When to use:** App initialization, before rendering any text

**Example:**
```typescript
// hooks/useCachedFonts.ts
import { useFonts } from 'expo-font';
import {
  Cairo_400Regular,
  Cairo_500Medium,
  Cairo_600SemiBold,
  Cairo_700Bold,
  Cairo_800ExtraBold,
  Cairo_900Black,
} from '@expo-google-fonts/cairo';

export const useCachedFonts = () => {
  const [fontsLoaded, fontError] = useFonts({
    Cairo_400Regular,
    Cairo_500Medium,
    Cairo_600SemiBold,
    Cairo_700Bold,
    Cairo_800ExtraBold,
    Cairo_900Black,
  });

  return { fontsLoaded, fontError };
};

// app/_layout.tsx (Expo Router)
import { SplashScreen } from 'expo-splash-screen';
import { useEffect } from 'react';
import { useCachedFonts } from '@/hooks/useCachedFonts';

SplashScreen.preventAutoHideAsync();

export default function RootLayout() {
  const { fontsLoaded, fontError } = useCachedFonts();

  useEffect(() => {
    if (fontsLoaded || fontError) {
      SplashScreen.hideAsync();
    }
  }, [fontsLoaded, fontError]);

  if (!fontsLoaded && !fontError) {
    return null; // Keep splash screen visible
  }

  return (
    // Your app layout
  );
}
```

### Pattern 4: Bidirectional Text Handling

**What:** Handle mixed Arabic (RTL) and English (LTR) text using Unicode BiDi algorithm
**When to use:** Text content that mixes Arabic and English in the same string

**Example:**
```typescript
// components/Text/BiDiText.tsx
import React from 'react';
import { Text, TextProps } from 'react-native';

interface BiDiTextProps extends TextProps {
  children: string;
}

// Unicode BiDi control characters
const LRM = '\u200E'; // Left-to-Right Mark
const RLM = '\u200F'; // Right-to-Left Mark

export const BiDiText: React.FC<BiDiTextProps> = ({ children, ...props }) => {
  // React Native's Text component automatically handles BiDi
  // using the Unicode Bidirectional Algorithm
  // Just ensure proper direction prop if needed

  return (
    <Text {...props}>
      {children}
    </Text>
  );
};

// Example usage:
// <BiDiText>مرحبا Hello العالم</BiDiText>
// Output will correctly show: مرحبا Hello العالم (with proper direction)
```

### Anti-Patterns to Avoid

- **Never use negative letter-spacing for Arabic:** Breaks character connections (Arabic letters connect differently than Latin)
- **Don't use lineHeight < fontSize:** Causes text clipping, especially for diacritics
- **Avoid mixing font weights across Arabic/English:** Use same font family (Cairo, Noto) for consistency
- **Don't rely on default Text component:** Always wrap with custom Text component for platform fixes
- **Never skip includeFontPadding on Android:** Extra padding causes misalignment; always set to false
- **Don't use Tajawal on iOS:** Known clipping issue (GitHub googlefonts/tajawal#7) with no official fix

## Don't Hand-Roll

Problems that look simple but have existing solutions:

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Font loading | Custom font loader with manual caching | expo-font with useFonts hook | Handles loading state, errors, caching automatically; supports config plugin for native embedding |
| Line height calculation | Hardcoded pixel values | Calculated multipliers (1.75x for Arabic) | Maintains proportions across font sizes; adapts to platform differences |
| Bidirectional text | Manual RTL/LTR detection and splitting | React Native's built-in BiDi support (I18nManager) | Implements Unicode Bidirectional Algorithm; handles complex cases like nested directions |
| Platform-specific text fixes | Conditional styles scattered in components | Centralized custom Text component | Single source of truth; easier to test and maintain |
| Letter spacing for Arabic | Applying same spacing as English | letterSpacing: 0 for Arabic | Arabic letters connect; spacing breaks connections and affects readability |
| Diacritic clipping | Adding padding to individual text elements | Proper line height (1.6-1.8x) + correct font choice | Addresses root cause; prevents clipping across all text |
| Font metrics debugging | Manual pixel measurements | Switch to Cairo/Noto Kufi fonts | Tajawal has incorrect vertical metrics; alternatives render correctly |

**Key insight:** Arabic typography has fundamentally different requirements than Latin typography due to:
1. **Connected script:** Letters connect to neighbors; letter-spacing breaks this
2. **Diacritical marks:** Extend above/below baseline more than Latin accents
3. **Vertical extent:** Taller ascenders/descenders require more line height
4. **Platform inconsistencies:** iOS/Android render lineHeight differently

Hand-rolling solutions without understanding these differences leads to clipping, misalignment, and poor readability. Use established patterns and libraries that handle these complexities.

## Common Pitfalls

### Pitfall 1: Using Insufficient Line Height
**What goes wrong:** Diacritical marks (kasra, fatha, damma) get clipped at top/bottom of text, making text unreadable
**Why it happens:** Developers apply Latin text standards (1.3-1.5x) to Arabic text, which needs 1.6-1.8x for diacritics
**How to avoid:**
- Use 1.75x multiplier for Arabic text (average of 1.6-1.8 recommendation)
- Test with fully vocalized text (educational content, Quranic verses)
- Check text in both large (headers) and small (body) sizes
**Warning signs:**
- Dots on letters (ب, ت, ث, ن, ي) appear cut off
- Hamza marks (أ, ؤ, ئ) missing or partial
- Shadda or tanwin marks above/below letters clipped

### Pitfall 2: Applying Letter Spacing to Arabic Text
**What goes wrong:** Arabic letters become disconnected, text becomes unreadable or looks broken
**Why it happens:** Copying English text styles (letterSpacing > 0) to Arabic without understanding connected script
**How to avoid:**
- Always use `letterSpacing: 0` for Arabic text
- Never use negative values (breaks connections differently than intended)
- Apply letter spacing only to Latin/English text portions
**Warning signs:**
- Arabic letters appear disconnected from neighbors
- Visual gaps between letters that should connect
- Text looks "choppy" or "broken"

### Pitfall 3: Using Tajawal Font on iOS
**What goes wrong:** Arabic letters and diacritics get clipped, especially bottom dots and top marks
**Why it happens:** Tajawal has incorrect vertical metrics (ascender/descender heights) causing iOS to clip characters outside expected bounds
**How to avoid:**
- Use Cairo font (modern geometric alternative with no clipping issues)
- Use Noto Kufi Arabic (W3C/UAE Design System recommended)
- Use Noto Naskh Arabic (traditional style for body text)
**Warning signs:**
- Letters with dots below (ي, ب, ت) have dots cut off on iOS
- Hamza marks disappear on certain letters
- Text in buttons or centered containers shows clipping
- Issue exists since March 2020 with no official fix (GitHub googlefonts/tajawal#7)

### Pitfall 4: Ignoring Platform-Specific Line Height Behavior
**What goes wrong:** Text appears misaligned or has inconsistent spacing between iOS and Android
**Why it happens:** Android applies lineHeight only on top of text; iOS distributes it to top and bottom
**How to avoid:**
- Add 2px to Android lineHeight to compensate
- Use Platform.select() for platform-specific adjustments
- Always set `includeFontPadding: false` on Android
- Set `textAlignVertical: 'center'` on Android
**Warning signs:**
- Text looks properly spaced on one platform but cramped on another
- Vertical centering works on iOS but not Android
- Multiline text has different line spacing between platforms

### Pitfall 5: Not Removing Android's Default Font Padding
**What goes wrong:** Text appears misaligned vertically, extra space above/below text elements
**Why it happens:** Android adds extra font padding by default for ascenders/descenders, but this makes text look off-center
**How to avoid:**
- Set `includeFontPadding: false` on all Android text styles
- Combine with `textAlignVertical: 'center'` for proper centering
- Apply at component level for consistency
**Warning signs:**
- Text in buttons appears off-center vertically on Android only
- Icons and text don't align properly on Android
- Extra whitespace above/below text that doesn't exist on iOS

### Pitfall 6: Testing Only Without Diacritics
**What goes wrong:** App looks fine during development but fails for users needing vocalized text (educational apps, religious content)
**Why it happens:** Most development uses non-vocalized Arabic text, which has less vertical extent than vocalized text
**How to avoid:**
- Always test with fully vocalized Arabic text (tashkeel/harakat)
- Test with edge cases: multiple stacked diacritics, shadda + vowel combinations
- Include vocalized text samples in visual regression tests
**Warning signs:**
- User reports of "missing marks" or "cut off text"
- Educational or religious content appears broken
- Text that looks fine in development breaks in production

### Pitfall 7: Hardcoding Font Sizes and Line Heights
**What goes wrong:** Typography doesn't scale properly, calculations break when font sizes change
**Why it happens:** Using pixel values instead of proportional multipliers
**How to avoid:**
- Calculate line height as `fontSize * multiplier` (e.g., `fontSize * 1.75`)
- Store multipliers in constants, not absolute values
- Use helper functions for consistent calculation
**Warning signs:**
- Changing font size breaks text spacing
- Need to manually update multiple values when adjusting typography
- Inconsistent line height ratios across different font sizes

## Code Examples

Verified patterns from official sources and research:

### Example 1: Complete Typography Configuration
```typescript
// constants/typography.ts
import { Platform } from 'react-native';

interface FontSizes {
  xxxl: number;
  xxl: number;
  xl: number;
  lg: number;
  md: number;
  sm: number;
  xs: number;
}

interface LineHeights extends FontSizes {}

interface LetterSpacing {
  tight: number;
  normal: number;
  wide: number;
  extraWide: number;
}

// Line height multipliers based on research
// Source: W3C Arabic Layout Requirements, UAE Design System
const LINE_HEIGHT_MULTIPLIER_ARABIC = 1.75; // Average of 1.6-1.8 recommendation
const LINE_HEIGHT_MULTIPLIER_ENGLISH = 1.4;
const ANDROID_LINE_HEIGHT_OFFSET = 2; // Android applies lineHeight only on top

const calculateLineHeight = (
  fontSize: number,
  isArabic: boolean = true
): number => {
  const multiplier = isArabic
    ? LINE_HEIGHT_MULTIPLIER_ARABIC
    : LINE_HEIGHT_MULTIPLIER_ENGLISH;

  const baseHeight = fontSize * multiplier;

  // Platform-specific adjustment
  if (Platform.OS === 'android') {
    return Math.round(baseHeight + ANDROID_LINE_HEIGHT_OFFSET);
  }

  return Math.round(baseHeight);
};

const fontSizes: FontSizes = {
  xxxl: 32,
  xxl: 28,
  xl: 24,
  lg: 18,
  md: 16,
  sm: 14,
  xs: 12,
};

const lineHeights: LineHeights = {
  xxxl: calculateLineHeight(fontSizes.xxxl), // ~56px on iOS, ~58px on Android
  xxl: calculateLineHeight(fontSizes.xxl),   // ~49px on iOS, ~51px on Android
  xl: calculateLineHeight(fontSizes.xl),     // ~42px on iOS, ~44px on Android
  lg: calculateLineHeight(fontSizes.lg),     // ~32px on iOS, ~34px on Android
  md: calculateLineHeight(fontSizes.md),     // ~28px on iOS, ~30px on Android
  sm: calculateLineHeight(fontSizes.sm),     // ~25px on iOS, ~27px on Android
  xs: calculateLineHeight(fontSizes.xs),     // ~21px on iOS, ~23px on Android
};

// Letter spacing - CRITICAL for Arabic
// Source: Multiple RTL styling guides, Arabic typography research
const letterSpacing: LetterSpacing = {
  tight: -0.5,    // Only for Latin text (all caps, display)
  normal: 0,      // ALWAYS use for Arabic - maintains character connections
  wide: 2,        // Only for Latin uppercase headings
  extraWide: 6,   // Only for Latin display text
};

export const Typography = {
  fontFamily: {
    regular: 'Cairo_400Regular',
    medium: 'Cairo_500Medium',
    semibold: 'Cairo_600SemiBold',
    bold: 'Cairo_700Bold',
    extrabold: 'Cairo_800ExtraBold',
    black: 'Cairo_900Black',
  },
  sizes: fontSizes,
  lineHeights,
  letterSpacing,
  multipliers: {
    arabic: LINE_HEIGHT_MULTIPLIER_ARABIC,
    english: LINE_HEIGHT_MULTIPLIER_ENGLISH,
  },
};

export type FontVariant = keyof FontSizes;
export type FontWeight = keyof typeof Typography.fontFamily;
```

### Example 2: Custom Text Component with Platform Fixes
```typescript
// components/ui/Text.tsx
// Source: React Native docs + platform-specific fixes from research
import React from 'react';
import {
  Text as RNText,
  TextProps as RNTextProps,
  StyleSheet,
  Platform,
} from 'react-native';
import { Typography, FontVariant, FontWeight } from '@/constants/typography';

export interface TextProps extends RNTextProps {
  variant?: FontVariant;
  weight?: FontWeight;
  color?: string;
}

export const Text: React.FC<TextProps> = ({
  variant = 'md',
  weight = 'regular',
  color = '#000000',
  style,
  children,
  ...props
}) => {
  const fontSize = Typography.sizes[variant];
  const lineHeight = Typography.lineHeights[variant];
  const fontFamily = Typography.fontFamily[weight];

  return (
    <RNText
      style={[
        styles.base,
        {
          fontSize,
          lineHeight,
          fontFamily,
          color,
          letterSpacing: Typography.letterSpacing.normal, // Always 0 for Arabic
        },
        style,
      ]}
      {...props}
    >
      {children}
    </RNText>
  );
};

const styles = StyleSheet.create({
  base: {
    // Android-specific fixes
    // Source: React Native docs - Text Style Props
    ...(Platform.OS === 'android' && {
      includeFontPadding: false,      // Remove extra padding
      textAlignVertical: 'center',     // Fix vertical alignment
    }),
  },
});
```

### Example 3: Font Loading with useFonts Hook
```typescript
// hooks/useCachedFonts.ts
// Source: Expo docs - Fonts guide
import { useFonts } from 'expo-font';
import {
  Cairo_400Regular,
  Cairo_500Medium,
  Cairo_600SemiBold,
  Cairo_700Bold,
  Cairo_800ExtraBold,
  Cairo_900Black,
} from '@expo-google-fonts/cairo';

export const useCachedFonts = () => {
  const [fontsLoaded, fontError] = useFonts({
    Cairo_400Regular,
    Cairo_500Medium,
    Cairo_600SemiBold,
    Cairo_700Bold,
    Cairo_800ExtraBold,
    Cairo_900Black,
  });

  return {
    fontsLoaded,
    fontError,
    isReady: fontsLoaded || !!fontError,
  };
};
```

### Example 4: Root Layout with Splash Screen Management
```typescript
// app/_layout.tsx (Expo Router)
// Source: Expo docs - Fonts best practices
import { useEffect } from 'react';
import { SplashScreen } from 'expo-splash-screen';
import { Stack } from 'expo-router';
import { useCachedFonts } from '@/hooks/useCachedFonts';

// Prevent splash screen from auto-hiding
SplashScreen.preventAutoHideAsync();

export default function RootLayout() {
  const { fontsLoaded, fontError } = useCachedFonts();

  useEffect(() => {
    if (fontsLoaded || fontError) {
      // Hide splash screen once fonts are loaded or errored
      SplashScreen.hideAsync();
    }
  }, [fontsLoaded, fontError]);

  // Keep splash screen visible while loading
  if (!fontsLoaded && !fontError) {
    return null;
  }

  // Show error state if fonts failed to load
  if (fontError) {
    console.error('Font loading error:', fontError);
    // Could render error UI here
  }

  return (
    <Stack>
      {/* Your app routes */}
    </Stack>
  );
}
```

### Example 5: Visual Regression Test Setup
```typescript
// components/ui/__tests__/Text.test.tsx
// Source: React Native testing best practices
import React from 'react';
import { render } from '@testing-library/react-native';
import { Text } from '../Text';

describe('Text Component - Arabic Typography', () => {
  it('renders Arabic text without clipping', () => {
    const { getByText } = render(
      <Text variant="md">مرحبا بك في التطبيق</Text>
    );
    expect(getByText('مرحبا بك في التطبيق')).toBeTruthy();
  });

  it('renders Arabic text with diacritics', () => {
    // Fully vocalized text for testing line height
    const vocalizedText = 'مَرْحَبًا بِكَ فِي التَّطْبِيقِ';
    const { getByText } = render(
      <Text variant="md">{vocalizedText}</Text>
    );
    expect(getByText(vocalizedText)).toBeTruthy();
  });

  it('handles mixed Arabic and English text', () => {
    const { getByText } = render(
      <Text variant="md">مرحبا Hello العالم World</Text>
    );
    expect(getByText(/مرحبا Hello/)).toBeTruthy();
  });

  it('applies correct line height for Arabic', () => {
    const { getByText } = render(
      <Text variant="lg">مرحبا</Text>
    );
    const textElement = getByText('مرحبا');
    const style = textElement.props.style;

    // Verify line height is ~1.75x fontSize
    const expectedLineHeight = 18 * 1.75; // lg size is 18
    expect(style.lineHeight).toBeCloseTo(expectedLineHeight, 0);
  });
});
```

### Example 6: Testing Checklist for Arabic Typography
```typescript
// __tests__/typography-visual-checklist.md
/**
 * Visual QA Checklist for Arabic Typography
 *
 * Test on BOTH iOS and Android devices
 *
 * 1. HEADERS (xxxl, xxl, xl)
 *    - [ ] No clipping of diacritics above/below
 *    - [ ] Proper vertical centering in containers
 *    - [ ] Consistent spacing across platforms
 *
 * 2. BODY TEXT (lg, md, sm)
 *    - [ ] Multiline text has correct line spacing
 *    - [ ] Diacritics visible on all lines
 *    - [ ] Letters connect properly (no gaps)
 *    - [ ] Vertical alignment consistent between platforms
 *
 * 3. BUTTON LABELS (md, sm)
 *    - [ ] Text vertically centered in button
 *    - [ ] No clipping on iOS
 *    - [ ] No extra padding on Android
 *
 * 4. FORM INPUTS (md, sm)
 *    - [ ] Placeholder text visible
 *    - [ ] Input text not clipped
 *    - [ ] Cursor aligns with text baseline
 *
 * 5. TOAST/ALERT MESSAGES (sm, xs)
 *    - [ ] Small text still readable
 *    - [ ] Diacritics not clipped at small sizes
 *
 * 6. MIXED ARABIC/ENGLISH
 *    - [ ] Bidirectional text renders correctly
 *    - [ ] Proper direction changes within string
 *    - [ ] Punctuation in correct position
 *
 * 7. VOCALIZED TEXT (with tashkeel)
 *    - [ ] Fatha (َ) visible above letters
 *    - [ ] Kasra (ِ) visible below letters
 *    - [ ] Damma (ُ) visible above letters
 *    - [ ] Shadda (ّ) visible above letters
 *    - [ ] Tanwin marks visible (ً ٍ ٌ)
 *
 * Test strings:
 * - Non-vocalized: "مرحبا بك في التطبيق الخاص بنا"
 * - Vocalized: "مَرْحَبًا بِكَ فِي التَّطْبِيقِ الخَاصِّ بِنَا"
 * - Mixed: "مرحبا Welcome إلى to التطبيق the app"
 * - Letters with dots: "بِسْمِ اللهِ الرَّحْمٰنِ الرَّحِيمِ"
 */
```

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| Tajawal font | Cairo or Noto Kufi Arabic | 2020-present | Tajawal has iOS clipping bug (GitHub #7 open since March 2020); Cairo/Noto render correctly |
| Same line height for all scripts | 1.75x for Arabic vs 1.4x for English | W3C guidelines updated | Prevents diacritics clipping; improves readability |
| AppLoading for font loading | expo-splash-screen + useFonts | Expo SDK 49+ (2023) | AppLoading deprecated; new approach more flexible |
| Runtime font loading only | Config plugin native embedding | Expo SDK 50+ (2024) | Fonts available immediately on app start; better performance |
| Generic letter-spacing values | letterSpacing: 0 specifically for Arabic | RTL design systems (2020+) | Maintains Arabic character connections |
| Ignoring includeFontPadding | includeFontPadding: false on Android | React Native best practices | Fixes vertical alignment issues on Android |
| lineHeight same on iOS/Android | Platform-specific lineHeight adjustment | Community workarounds (2021+) | Compensates for platform rendering differences |

**Deprecated/outdated:**
- **AppLoading component**: Deprecated in Expo SDK 49+; use expo-splash-screen with null return instead
- **Font.loadAsync()**: Still works but useFonts hook is preferred for better loading state management
- **Tajawal for production**: Has unresolved iOS clipping bug; use Cairo or Noto Kufi Arabic instead
- **Uniform line height across scripts**: Arabic requires 1.6-1.8x multiplier vs 1.3-1.5x for English
- **Default Android font padding**: Always disable with includeFontPadding: false for proper alignment

## Open Questions

Things that couldn't be fully resolved:

1. **Exact line height multiplier for different Arabic font styles**
   - What we know: General recommendation is 1.6-1.8x for Arabic with diacritics
   - What's unclear: Whether different Arabic font styles (Kufi, Naskh, Diwani) need different multipliers
   - Recommendation: Use 1.75x (average of 1.6-1.8) as baseline; test with actual content and adjust per font if needed

2. **Optimal line height for mixed Arabic/English paragraphs**
   - What we know: Arabic needs 1.6-1.8x, English needs 1.3-1.5x
   - What's unclear: Best multiplier when same paragraph contains both scripts (does Arabic win, or use middle ground?)
   - Recommendation: Use Arabic multiplier (1.75x) for safety; test with representative content

3. **Performance impact of platform-specific line height calculations**
   - What we know: Platform.select() adds runtime overhead
   - What's unclear: Whether calculating line heights at runtime vs build time has measurable performance impact
   - Recommendation: Calculate at module load time (outside components) for minimal overhead

4. **Visual regression testing tools for Arabic text**
   - What we know: react-native-owl exists for visual regression testing
   - What's unclear: How well it handles Arabic/RTL text and diacritics; whether specialized tools exist
   - Recommendation: Use react-native-owl with manual QA on real devices; prioritize testing with vocalized text

5. **Font subsetting for Arabic fonts in production**
   - What we know: Arabic fonts can be large due to glyph complexity and ligatures
   - What's unclear: Best practices for font subsetting in React Native/Expo; impact on bundle size
   - Recommendation: Use full fonts for now; investigate subsetting if bundle size becomes issue

## Sources

### Primary (HIGH confidence)
- [React Native Text Style Props Documentation](https://reactnative.dev/docs/text-style-props) - Official React Native API reference for typography properties
- [Expo Fonts Documentation](https://docs.expo.dev/develop/user-interface/fonts/) - Official Expo font loading best practices
- [W3C Arabic & Persian Layout Requirements](https://www.w3.org/TR/alreq/) - W3C technical specification for Arabic typography
- [GitHub: Tajawal Font Issue #7 - Bottom Padding](https://github.com/googlefonts/tajawal/issues/7) - Official bug report for Tajawal clipping on iOS

### Secondary (MEDIUM confidence)
- [Right to Left Styling 101](https://rtlstyling.com/posts/rtl-styling/) - Arabic line height 1.8 vs English 1.5 recommendation
- [UAE Design System Typography Guidelines](https://designsystem.gov.ae/guidelines/typography) - Government design system recommending Noto Kufi Arabic, 1.5x minimum line height
- [React Native Font Inconsistency Fix - Vincit Blog](https://www.vincit.com/blog/fix-custom-font-inconsistency-in-react-native) - includeFontPadding: false best practice
- [Medium: Mastering Font Families in React Native Expo](https://medium.com/@ibukunogundipe2/mastering-font-families-in-react-native-expo-the-ultimate-guide-d5db2e3cc299) - Expo font loading patterns
- [@expo-google-fonts/cairo npm](https://www.npmjs.com/@expo-google-fonts/cairo) - Cairo font package for Expo
- [@expo-google-fonts/noto-kufi-arabic npm](https://www.npmjs.com/package/@expo-google-fonts/noto-kufi-arabic) - Noto Kufi Arabic font package with 9 weights
- [GitHub Issue: React Native lineHeight iOS vs Android](https://github.com/facebook/react-native/issues/10712) - Platform differences in lineHeight rendering
- [Consistent Font Line Height Rendering - Medium](https://martinadamko.medium.com/consistent-font-line-height-rendering-42068cc2957d) - Platform-specific workarounds

### Tertiary (LOW confidence)
- [Arabic Diacritics Guide](https://arabictyping101.com/guide/arabic-diacritics) - General Arabic typography overview
- [Tajawal Font - Google Fonts](https://fonts.google.com/specimen/Tajawal) - Font description (no specific metrics)
- [Tajawal Font - Arabic Calligraphy Generator](https://arabic-calligraphy-generator.com/fonts/tajawal) - General font characteristics
- [React Native Apps RTL Support - Medium](https://medium.com/@vikashwebb/react-native-apps-support-rtl-right-to-left-7a9602783542) - General RTL setup guide
- [Bidirectional Text Unicode Guide](https://unicodecleaner.com/blog/bidirectional-text-rtl-ltr-unicode) - BiDi algorithm explanation
- [Master English-Arabic App Development - AppInventiv](https://appinventiv.com/blog/english-arabic-app-development-challenges-and-solutions/) - General challenges overview

## Metadata

**Confidence breakdown:**
- Standard stack: MEDIUM - Cairo and Noto Kufi fonts verified from Expo packages and community reports; Tajawal issue confirmed from GitHub
- Architecture: HIGH - Patterns verified from official Expo/React Native docs and established community practices
- Line height recommendations: MEDIUM - W3C provides qualitative guidance; numerical 1.6-1.8x range from multiple design systems but not in official W3C spec
- Pitfalls: HIGH - Tajawal clipping verified from GitHub issue; platform differences verified from React Native GitHub issues and docs
- Letter spacing: HIGH - Verified from multiple RTL styling guides and Arabic typography sources

**Research date:** 2026-02-03
**Valid until:** Approximately 90 days (2026-05-03)
- Font recommendations may change if Tajawal issue is fixed or new fonts become available
- React Native/Expo APIs are relatively stable for typography
- W3C guidelines are stable but implementation best practices may evolve
- Recommend re-checking Tajawal GitHub issue status before production deployment
